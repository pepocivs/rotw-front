<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="general-style.html">

<dom-module id="my-items">
    <template>
      <style include="general-style iron-flex iron-flex-alignment">
        :host {
            display: block;
          }
      </style>
      <iron-ajax auto
      url="http://zelda.pepocivs.com/items"
      params='{}'
      handle-as="json"
      last-response="{{itemsResponse}}"></iron-ajax>

      <div class="layout horizontal wrap center-center item-container">
        <template is="dom-repeat" items="[[itemList]]">
            <div class="item-box" on-tap="_addElement" style="background-image: url('{{item.image}}');">
              <div class="item-count">x{{item.count}}</div>
            </div>
        </template>
      </div>
    </template>

    <script>
        Polymer({
            is: 'my-items',

            properties: {
              inventory: {
                type: Object
              },
              itemsResponse: {
                type: Object,
                observer: '_itemsResponse'
              }
            },
            listeners: {
            },
            observers: [],
            _itemsResponse: function(response) {
                for (var x = 0; x < response.length; x++) {
                  if (!response[x].count) response[x].count = 0;
                }
                this.itemList = response;
            },
            _addElement: function(e) {
              var model = e.model;
              model.set('item.count', model.item.count+1);
            }
        });
    </script>
</dom-module>
