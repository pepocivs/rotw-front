<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation.html">

<link rel="import" href="general-style.html">


<dom-module id="my-initial">
    <template>
      <style include="general-style iron-flex iron-flex-alignment">
        :host {
            display: block;
          }
      </style>
      <iron-ajax auto
        url="http://zelda.pepocivs.com/items"
        params='{}'
        handle-as="json"
        last-response="{{itemsResponse}}">
      </iron-ajax>

      
      <div class="layout horizontal wrap center-center box-initial">


        <paper-button class="icon-initial" raised class="indigo" >
        <img src="/images/pira.svg" alt="" height="60px">
          <p>a√±adir</p>
        </paper-button>

      </div>

      <neon-animated-pages id="pages" entry-animation="{{entryAnimation}}" exit-animation="{{exitAnimation}}" on-track="handleTrack">
        <neon-animatable>
          <div class="layout horizontal wrap center-center item-container-initial">
            <template is="dom-repeat" items="[[itemList]]">
                <div class="item-box" style="background-image: url('{{item.image}}');">
                  <div class="item-count">x{{item._id}}</div>
                </div>
            </template>
          </div>
        </neon-animatable>
      </neon-animated-pages>


    </template>

    <script>
        Polymer({
            is: 'my-initial',

            properties: {
              inventory: {
                type: Object
              },
              itemsResponse: {
                type: Object,
                observer: '_itemsResponse'
              }
            },
            observers: [],
            _itemsResponse: function(response) {
                this.itemList = response;
            },
            handleTrack: function(e){
              switch(e.detail.state){
                case 'start':
                this.sizeTapped = e.detail.y;
                console.log(this.sizeTapped);
                break;
                case 'track':

                  break;

                case 'end':
                  if(this.$.pages.selected == 0){
                      if(e.detail.y < (this.sizeTapped-100)){
                        this.exitAnimation= 'fade-out-animation';
                        this.entryAnimation= 'slide-down-animation';
                        this.$.pages.selected = 1;
                      }
                  }
                  if(this.$.pages.selected == 1 && this.sizeTapped < 50){
                      if(e.detail.y < (this.sizeTapped+100)){
                        this.exitAnimation= 'fade-up-animation';
                        this.entryAnimation= 'slide-in-animation';
                        this.$.pages.selected = 0;
                      }
                  }
                  break;
              }
            }
            
        });
    </script>
</dom-module>
